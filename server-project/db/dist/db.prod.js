"use strict";var MongoClient=require("mongodb").MongoClient,url="mongodb://localhost:27017",dbName="Manergents",connect=function(){return new Promise(function(t,r){MongoClient.connect(url,{useUnifiedTopology:!0},function(e,n){e?r(e):t(n),console.log("ok")})})},find=function(c,i){return new Promise(function(t,r){var n,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(connect());case 2:n=e.sent,o=n.db(dbName),o.collection(c).find(i||{}).toArray(function(e,n){e?r(e):t(n)}),n.close("查找成功");case 7:case"end":return e.stop()}})})},insert=function(c,i){return new Promise(function(t,r){var n,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(connect());case 2:n=e.sent,o=n.db(dbName),o.collection(c).insertMany(i,function(e,n){e?r(e):t(n)}),n.close("插入成功");case 7:case"end":return e.stop()}})})},updateOne=function(c,i,a){return new Promise(function(t,r){var n,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(connect());case 2:n=e.sent,o=n.db(dbName),o.collection(c).updateOne(i,{$set:a},function(e,n){e?r(e):t(n)}),n.close("更新成功");case 7:case"end":return e.stop()}})})},remove=function(c,i){return new Promise(function(t,r){var n,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(connect());case 2:n=e.sent,o=n.db(dbName),o.collection(c).remove(i,function(e,n){e?r(e):t(n)}),n.close("删除成功");case 7:case"end":return e.stop()}})})};module.exports={find:find,insert:insert,updateOne:updateOne,remove:remove};